
<!DOCTYPE HTML>
<html>
    <head>
        <title>Hybrid App with NativeDroid</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />

        <!-- FontAwesome - http://fortawesome.github.io/Font-Awesome/ -->
        <link rel="stylesheet" href="css/font-awesome.min.css" />

        <!-- jQueryMobileCSS - original without styling -->
        <link rel="stylesheet" href="css/jquerymobile.css" />

        <!-- nativeDroid core CSS -->
        <link rel="stylesheet" href="css/jquerymobile.nativedroid.css" />

        <!-- nativeDroid: Light/Dark -->
        <link rel="stylesheet" href="css/jquerymobile.nativedroid.dark.css"  id='jQMnDTheme' />

        <!-- nativeDroid: Color Schemes -->
        <link rel="stylesheet" href="css/jquerymobile.nativedroid.color.green.css" id='jQMnDColor' />

        <!-- jQuery / jQueryMobile Scripts -->
        <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
        <script src="http://code.jquery.com/mobile/1.3.1/jquery.mobile-1.3.1.min.js"></script>


    </head>
    <body>

        <div data-role="page" data-theme='b'>


            <div data-role="header" data-position="fixed" data-tap-toggle="false" data-theme='b'>
                <a href="index.html" data-ajax="false"><i class='icon-ellipsis-vertical'></i></a>
                <h1>Phonegap App!</h1>
            </div>

            <div data-role="content">   
                <ul data-role="listview" data-inset="true">
                    <li>
                        <fieldset class="ui-grid-solo">
                            <div class="ui-block-a"><button onclick="capturePhoto();" data-theme="b">Klik her for at tage et billede!</button></div>
                        </fieldset>
                    </li>
                    <li>
                        <div class="ui-content">
                            <img id="cameraPic" src="" style="width:80%;height:auto;"/>
                        </div>
                    </li>
                    <li>
                        <div id="savedlocationid">
                            
                        </div>
                    </li>
                </ul>

            </div>

        </div>
        <script type="text/javascript" src="phonegap.js"></script>
        <script type="text/javascript" src="js/index.js"></script>
        <script>
                                function capturePhoto() {
                                    navigator.camera.getPicture(uploadPhoto, null, {sourceType: 1, quality: 60, saveToPhotoAlbum: true, correctOrientation: true});
                                }

                                function uploadPhoto(data) {
                                    // this is where you would send the image file to server

                                    
                                    //output image to screen
                                    cameraPic.src = data;
                                    //alert(data);
                                    alert("file saved at: " + data.substring(26));
                                    getGeoLocation();
                                   // $("#savedlocationid").html(data.substring(26));
                                }
                                
                                function getGeoLocation(){
                                    navigator.geolocation.getCurrentPosition(geolocsucces, null, { enableHighAccuracy: true});
                                }
                                function geolocsucces(position){
                                    alert("position: " + position);
                                    alert("position coords: " + position.coords);
                                    alert("position coords latitude: " + position.coords.latitude);
                                    alert("position timestamp: " + position.timestamp);
                                    $("#savedlocationid").html(position.coords + "\nTimestamp: " + position.timestamp);
                                }
        </script>
    </body>
</html>
